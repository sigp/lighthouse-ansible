---
- name: Creates a new testnet with new EC2 instances
  hosts:
    - localhost
  gather_facts: False
  roles:
    - aws
  vars_files:
    - ./secret.yml
  tasks:
    - name: Provision boot_node ec2 instances
      vars:
        role: "boot_node"
        instance_count: "{{ boot_node_per_region }}"
      include_tasks: roles/aws/tasks/ec2-provision.yml
    - name: Provision beacon_node ec2 instances
      vars:
        role: "beacon_node"
        instance_count: "{{ beacon_node_per_region }}"
      include_tasks: roles/aws/tasks/ec2-provision.yml
