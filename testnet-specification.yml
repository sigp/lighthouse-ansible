---
- name: Create a testnet specification and distribute it
  roles:
    - common
    - lighthouse
  hosts:
    - lighthouse_bn
    - lighthouse_vc
  vars_files:
    - ./secret.yml
  gather_facts:
    false
  tasks:
    - name: Collect boot nodes
      when: "'lighthouse_boot_node in group_names'"
      include_tasks: roles/lighthouse/tasks/boot-nodes.yml

    - name: Define and distribute testnet dir
      when: "'lighthouse_bn in group_names'"
      include_tasks: roles/lighthouse/tasks/testnet-dir.yml
